var q=Object.defineProperty;var L=(t,e,i)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var m=(t,e,i)=>(L(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();const k=[{id:"1",name:"To do",tasks:[{id:"1",title:"Finibus Bonorum",description:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores"},{id:"2",title:"Malorum",description:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur"}]},{id:"2",name:"In progress",tasks:[{id:"1",title:"Nemo enim",description:"Sed ut perspiciatis unde omnis"},{id:"2",title:"iste natus",description:"iste natus error sit voluptatem"}]},{id:"3",name:"QA Review",tasks:[{id:"1",title:"Sed ut perspiciatis unde omnis iste natus error sit",description:"Learn TypeScript and use it in your projects"}]},{id:"4",name:"Dev Deployment",tasks:[{id:"1",title:"quis nostrum",description:"quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur"},{id:"2",title:"Quis autem",description:"Quis autem vel eum iure reprehenderit"}]},{id:"5",name:"Production",tasks:[{id:"1",title:"Nemo enimt",description:"Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni "},{id:"2",title:"perspiciatis unde",description:"labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam"}]},{id:"6",name:"Just a section",tasks:[{id:"1",title:"Lorem ipsum",description:"Quisque tempus justo id orci auctor faucibus. Cras bibendum, quam ac ornare sollicitudin, erat erat sollicitudin magna, nec porta lorem orci ut tortor"},{id:"2",title:"Nulla tincidunt molestie",description:"Suspendisse eget turpis lectus"}]}],N=()=>JSON.parse(localStorage.getItem("sections"))||k,p=t=>{localStorage.setItem("sections",JSON.stringify(t))};let b;const E=new Uint8Array(16);function H(){if(!b&&(b=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(E)}const o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function T(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}const I=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),h={randomUUID:I};function y(t,e,i){if(h.randomUUID&&!e&&!t)return h.randomUUID();t=t||{};const s=t.random||(t.rng||H)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){i=i||0;for(let n=0;n<16;++n)e[i+n]=s[n];return e}return T(s)}class x{constructor(e){m(this,"sections");this.sections=e}addSection(e){this.sections.push(e),p(this.sections)}addTask(e,i){const s=this.sections.find(n=>n.id===e);s&&s.tasks.push(i),p(this.sections)}removeSection(e){this.sections=this.sections.filter(i=>i.id!==e),p(this.sections)}removeTask(e,i){const s=this.sections.find(n=>n.id===e);s&&(s.tasks=s.tasks.filter(n=>n.id!==i)),p(this.sections)}}function d(t){const e=document.createElement(t.element);return t.className&&(e.className=t.className),t.id&&(e.id=t.id),t.innerHtml&&(e.innerHTML=t.innerHtml),t.parent&&t.parent.appendChild(e),t.draggable&&(e.draggable=t.draggable),t.onClick&&e.addEventListener("click",t.onClick),e}class A{constructor(e,i){m(this,"container");m(this,"sections");m(this,"board");this.container=e,this.sections=i,this.board=new x(this.sections)}render(){var a;const i=d({element:"div",className:"wrapper",innerHtml:`
            <header>
                <h1>Kanban Board</h1>
                <form id="sectionForm" class="d-none">
                  <input class="title-input" type="text" placeholder="Section Title" name="title" required />
                  <button class="btn-add-task" type="submit">+&nbsp;&nbsp;&nbspAdd Section</button>
                <form>
            </header>
            <main></main>
        `,parent:this.container}),s=d({element:"button",innerHtml:"+&nbsp;&nbsp;&nbspAdd Section",id:"btnAddSection",onClick:()=>{var r;s.classList.add("d-none"),(r=i.querySelector("#sectionForm"))==null||r.classList.remove("d-none")}});(a=i.querySelector("header"))==null||a.appendChild(s);const n=d({element:"div",className:"board",parent:i.querySelector("main")});this.sections.forEach(r=>{const c=d({element:"div",className:"section",parent:n});d({element:"h3",innerHtml:r.name,parent:c,className:"section-header"}),d({element:"button",innerHtml:"&#128465;",className:"delete-section-btn",parent:c,onClick:()=>this.deleteSection(r.id)});const S=d({element:"ul",className:"droppable",parent:c,id:r.id});r.tasks.forEach(l=>{const u=d({element:"li",className:"draggable",parent:S,draggable:!0,id:l.id});d({element:"h4",innerHtml:l.title,parent:u,className:"task-title"}),d({element:"p",innerHtml:l.description,parent:u}),d({element:"button",innerHtml:"&#128465;",className:"delete-btn",parent:u,onClick:()=>this.deleteTask(r.id,l.id)})});const v=d({element:"button",innerHtml:"+&nbsp;&nbsp;&nbspAdd Task",parent:c,className:"btn-add-task",onClick:()=>{v.classList.add("d-none"),g.classList.add("d-block")}});let g=d({element:"div",innerHtml:`
          <form>
            <input class="title-input" type="text" placeholder="title" name="title" required />
            <textarea class="title-input" placeholder="description" name="description"></textarea>
            <button class="btn-add-task" type="submit">+&nbsp;&nbsp;&nbspAdd Task</button>
          <form>
        `,parent:c,className:"add-task d-none"});g.children[0].addEventListener("submit",l=>{l.preventDefault();const u={title:l.target.title.value,description:l.target.description.value};this.addTaskFormHandler(r.id,u),g.classList.remove("d-block"),v.classList.remove("d-none")})})}prepareEventListeners(){const e=document.querySelectorAll(".droppable"),i=document.querySelectorAll(".draggable"),s=document.querySelector("#sectionForm");e.forEach(n=>{n.addEventListener("dragover",a=>{a.preventDefault(),n.classList.add("drag-over");const r=this.getDragAfterElement(n,a.clientY),c=document.querySelector(".current-drag");r?n.insertBefore(c,r):n.appendChild(c)}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",()=>{n.classList.remove("drag-over")})}),i.forEach(n=>{n.addEventListener("dragstart",()=>{n.classList.add("current-drag")}),n.addEventListener("dragend",()=>{n.classList.remove("current-drag")})}),s.addEventListener("submit",n=>{var a;n.preventDefault(),this.addSectionFormHandler(n.target.title.value),(a=document.getElementById("btnAddSection"))==null||a.classList.remove("d-none"),s.classList.add("d-none")})}getDragAfterElement(e,i){return[...e.querySelectorAll(".draggable:not(.current-drag)")].reduce((n,a)=>{const r=a.getBoundingClientRect(),c=i-r.top-r.height/2;return c<0&&c>n.offset?{offset:c,element:a}:n},{offset:Number.NEGATIVE_INFINITY}).element}addTaskFormHandler(e,i){const s={id:y(),title:i.title,description:i.description};this.board.addTask(e,s),location.reload()}addSectionFormHandler(e){const i={id:y(),name:e,tasks:[]};this.board.addSection(i),location.reload()}deleteTask(e,i){this.board.removeTask(e,i),location.reload()}deleteSection(e){this.board.removeSection(e),location.reload()}}const U=document.getElementById("app"),f=new A(U,N());f.render();f.prepareEventListeners();
